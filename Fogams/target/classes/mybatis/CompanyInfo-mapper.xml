<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.companyinfo">

	<select id="selectList" resultType="CompanyDto">
		SELECT COMPANY_NO, COMPANY_CONTENT, COMPANY_TEL, COMPANY_NUMBER, COMPANY_ADDR, COMPANY_IMG
		FROM COMPANY
	</select>
	
	
	
	<insert id="insert" parameterType="CompanyDto">
		INSERT INTO COMPANY
		VALUES(COMPANY_SEQ.NEXTVAL, #{company_name}, #{member_no}, #{company_sort}, #{company_content}, 
		#{company_tel}, #{company_number}, #{company_img},
		#{company_addr} , #{company_city})
	</insert>
	
	<update id="updateMemberGrade" parameterType="int">
		UPDATE MEMBER SET MEMBER_GRADE = 2
		WHERE MEMBER_GRADE = 1
		AND MEMBER_NO = #{member_no}
	</update>
	
	
	<select id="allList" resultType="CompanyDto">
		SELECT COM.COMPANY_NO,COM.COMPANY_IMG,PRICE.COMPANY_MONEY,PRICE.COMPANY_PRODUCT,COM.COMPANY_NAME 
		FROM COMPANY_PRICE PRICE INNER JOIN COMPANY COM 
		ON PRICE.COMPANY_NO=COM.COMPANY_NO
	</select>
	
	
	<select id="roomsList" resultType="CompanyDto">
		SELECT COM.COMPANY_NO,COM.COMPANY_IMG,PRICE.COMPANY_MONEY,PRICE.COMPANY_PRODUCT,COM.COMPANY_NAME
		FROM COMPANY_PRICE PRICE INNER JOIN COMPANY COM 
		ON PRICE.COMPANY_NO=COM.COMPANY_NO
		WHERE COMPANY_SORT='숙소'
	</select>
	
	<select id="foodList" resultType="CompanyDto">
		SELECT COM.COMPANY_NO,COM.COMPANY_IMG,PRICE.COMPANY_MONEY,PRICE.COMPANY_PRODUCT,COM.COMPANY_NAME 
		FROM COMPANY_PRICE PRICE INNER JOIN COMPANY COM 
		ON PRICE.COMPANY_NO=COM.COMPANY_NO
		WHERE COMPANY_SORT='음식점'
	</select>
	
	<select id="tourList" resultType="CompanyDto">
		SELECT COM.COMPANY_NO,COM.COMPANY_IMG,PRICE.COMPANY_MONEY,PRICE.COMPANY_PRODUCT,COM.COMPANY_NAME 
		FROM COMPANY_PRICE PRICE INNER JOIN COMPANY COM 
		ON PRICE.COMPANY_NO=COM.COMPANY_NO
		WHERE COMPANY_SORT='명소'
	</select>
	
	
	

</mapper>
